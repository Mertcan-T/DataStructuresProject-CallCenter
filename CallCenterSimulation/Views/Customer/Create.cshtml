@model CallCenterSimulation.Models.Customer

@{
    ViewBag.Title = "Müşteri Talep Oluştur";
}

<h2>Talep Oluştur</h2>

<form method="post" asp-action="Create">
    <div>
        <label>Adınız:</label>
        <input asp-for="Ad" />
        <span asp-validation-for="Ad" style="color:red"></span>
    </div>
    <div>
        <label>Talebiniz:</label>
        <input asp-for="Talep" />
        <span asp-validation-for="Talep" style="color:red"></span>
    </div>
    <div>
        <button type="submit">Talep Gönder</button>
    </div>
</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.5/signalr.min.js"></script>
    <script>
        const connection = new signalR.HubConnectionBuilder()
            .withUrl("/callCenterHub")
            .build();

        connection.on("QueueUpdated", () => {
            location.reload();
        });

        connection.start().catch(err => console.error(err.toString()));
    </script>
}
